<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Dashboard</title>
    <link rel="stylesheet" href="/css/Panels.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            if (!token) {
                console.log('No token found, redirecting to login page');
                window.location.href = '/index.html';
            } else {
                fetch('/api/check-login', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                })
                .then(response => {
                    console.log('Received response from /api/check-login');
                    return response.json();
                })
                .then(data => {
                    console.log('Login status data:', data);
                    if (!data.loggedIn) {
                        console.log('Token validation failed, redirecting to login page');
                        window.location.href = '/index.html'; // Redirect to login page
                    } else {
                        console.log('Token is valid, user is logged in');
                    }
                })
                .catch(error => {
                    console.error('Error checking login status:', error);
                });
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="panel" id="decks">
            <a href="CardDetails.html">Decks</a>
        </div>
        <div class="panel" id="solo-game">
            <a href="simulatedeck.html">Solo Game</a>
        </div>
        <div class="panel" id="multiplayer-game">
            <a href="main.html">Multiplayer Game</a>
        </div>
        <div class="panel" id="deck-builder">
            Deck Builder
        </div>
    </div>
</body>
</html>
